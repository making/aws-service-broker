applications:
- name: aws-service-broker
  buildpacks:
  - https://github.com/making/cits-sidecar-buildpack.git
  - java_buildpack_offline
  memory: 768m
  path: ./target/aws-service-broker-0.0.1-SNAPSHOT.jar
  env:
    JBP_CONFIG_OPEN_JDK_JRE: '{jre: {version: 17.+}}'
    SPRING_CLOUD_AWS_CREDENTIALS_STS_WEBIDENTITYTOKENFILE: /tmp/token
    SPRING_CLOUD_AWS_CREDENTIALS_STS_ROLEARN: ((ROLE_ARN))
    SPRING_CLOUD_AWS_CREDENTIALS_STS_ROLESESSIONNAME: ${vcap.application.application_name}
    SPRING_CLOUD_AWS_CREDENTIALS_STS_ASYNCCREDENTIALSUPDATE: 'true'
    AWS_REGION: ap-northeast-1
    IAM_OIDCPROVIDERARN: ((OIDC_PROVIDER_ARN))
    CITS_URL: https://((CITS_DOMAIN))
